<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Gift For You ‚ô°</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Patrick+Hand&family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::-webkit-scrollbar {
            display: none;
        }

        :root {
            --cream: #fef9f3;
            --warm-brown: #8b7355;
            --soft-orange: #e8a87c;
            --muted-pink: #d4a5a5;
            --sage: #9caf88;
            --paper: #f5ede4;
            --ink: #3d3534;
        }

        body {
            font-family: 'Patrick Hand', cursive;
            background: linear-gradient(135deg, #fef9f3 0%, #f5e6d3 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: clamp(10px, 3vw, 20px);
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 1;
        }

        /* ========== ENVELOPE INTRO ========== */
        #envelopeScreen {
            position: fixed;
            inset: 0;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #fef9f3 0%, #f5e6d3 100%);
            transition: opacity 0.6s ease;
            padding: 20px;
        }

        #envelopeScreen.fade-away {
            opacity: 0;
            pointer-events: none;
        }

        .env-title {
            font-family: 'Caveat', cursive;
            font-size: clamp(1.5rem, 5vw, 2rem);
            color: var(--warm-brown);
            margin-bottom: clamp(20px, 5vh, 36px);
            opacity: 0;
            animation: envTitleIn 0.8s 0.4s ease forwards;
            text-shadow: 1px 1px 0 rgba(212,165,165,0.4);
            text-align: center;
            padding: 0 10px;
        }

        @keyframes envTitleIn {
            to { opacity: 0.75; transform: translateY(0); }
            from { opacity: 0; transform: translateY(-12px); }
        }

        /* envelope wrapper ‚Äì clickable */
        .envelope-wrap {
            position: relative;
            width: min(90vw, 320px);
            height: min(65vw, 230px);
            max-height: 230px;
            cursor: pointer;
            perspective: 1200px;
        }

        /* ---- envelope body ---- */
        .envelope {
            position: absolute;
            inset: 0;
            background: linear-gradient(160deg, #fff8f0 0%, #f0ddd0 100%);
            border-radius: clamp(8px, 2vw, 12px) clamp(8px, 2vw, 12px) clamp(12px, 3vw, 18px) clamp(12px, 3vw, 18px);
            box-shadow:
                0 8px 32px rgba(100,60,30,0.18),
                0 2px 6px rgba(100,60,30,0.12),
                inset 0 1px 0 rgba(255,255,255,0.6);
            border: 2px solid rgba(139,115,85,0.25);
            overflow: hidden;
        }

        /* bottom-left & bottom-right triangles (envelope flaps) */
        .envelope::before,
        .envelope::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 0; height: 0;
        }
        .envelope::before {
            left: 0;
            border-style: solid;
            border-width: 50% 0 0 50%;
            border-color: transparent transparent transparent rgba(139,115,85,0.12);
        }
        .envelope::after {
            right: 0;
            border-style: solid;
            border-width: 50% 50% 0 0;
            border-color: transparent rgba(139,115,85,0.12) transparent transparent;
        }

        /* bottom V-fold crease line */
        .env-bottom-fold {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 50%;
            pointer-events: none;
        }
        .env-bottom-fold::before {
            content: '';
            position: absolute;
            top: 0; left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-style: solid;
            border-width: 0 50% 100% 50%;
            border-color: transparent transparent rgba(139,115,85,0.07) transparent;
        }

        /* ---- top flap (opens) ---- */
        .env-flap {
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 50%;
            transform-origin: top center;
            transform: rotateX(0deg);
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 3;
        }

        .env-flap-face {
            position: absolute;
            inset: 0;
            background: linear-gradient(170deg, #fff5ec 0%, #ecdcc8 100%);
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            border-radius: clamp(8px, 2vw, 12px) clamp(8px, 2vw, 12px) 0 0;
            box-shadow: inset 0 -2px 4px rgba(139,115,85,0.15);
        }

        /* open state */
        .envelope-wrap.open .env-flap {
            transform: rotateX(-180deg);
        }

        /* ---- heart in the center ---- */
        .heart-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            width: clamp(50px, 15vw, 72px);
            height: clamp(48px, 14vw, 66px);
            background: linear-gradient(135deg, #ff5f8f, #e6396f);
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            clip-path: path('M 36 64.05 L 31.65 60.09 C 16.2 46.08 6 36.84 6 25.5 C 6 16.26 13.26 9 22.5 9 C 27.72 9 32.73 11.43 36 15.27 C 39.27 11.43 44.28 9 49.5 9 C 58.74 9 66 16.26 66 25.5 C 66 36.84 55.8 46.08 40.35 60.09 L 36 64.05 Z');
            -webkit-clip-path: path('M 36 64.05 L 31.65 60.09 C 16.2 46.08 6 36.84 6 25.5 C 6 16.26 13.26 9 22.5 9 C 27.72 9 32.73 11.43 36 15.27 C 39.27 11.43 44.28 9 49.5 9 C 58.74 9 66 16.26 66 25.5 C 66 36.84 55.8 46.08 40.35 60.09 L 36 64.05 Z');
        }

        /* Pulse animation */
        @keyframes heartPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            15%      { transform: translate(-50%, -50%) scale(1.12); }
            30%      { transform: translate(-50%, -50%) scale(1); }
            45%      { transform: translate(-50%, -50%) scale(1.08); }
            60%      { transform: translate(-50%, -50%) scale(1); }
        }

        .heart-btn {
            animation: heartPulse 1.8s ease-in-out infinite;
        }

        .heart-btn svg {
            width: 100%; height: 100%;
            filter: drop-shadow(0 3px 8px rgba(180,60,80,0.35));
            transition: filter 0.3s;
        }

        .heart-btn:hover svg {
            filter: drop-shadow(0 4px 14px rgba(180,60,80,0.55));
        }

        /* tiny sparkles around heart */
        .heart-sparkles .sp {
            position: absolute;
            font-size: clamp(12px, 3vw, 16px);
            opacity: 0;
            pointer-events: none;
            animation: spFloat 2.2s ease-out infinite;
        }
        .heart-sparkles .sp:nth-child(1) { top: -8px;  left: 50%; animation-delay: 0s; }
        .heart-sparkles .sp:nth-child(2) { top: 15%;  right: -14px; animation-delay: 0.6s; }
        .heart-sparkles .sp:nth-child(3) { bottom: -4px; left: 50%; animation-delay: 1.2s; }
        .heart-sparkles .sp:nth-child(4) { top: 15%;  left: -14px; animation-delay: 1.8s; }

        @keyframes spFloat {
            0%   { opacity: 0; transform: translateY(0) scale(0.4); }
            40%  { opacity: 1; }
            100% { opacity: 0; transform: translateY(-18px) scale(1); }
        }

        /* subtle wax-seal ring at bottom of envelope */
        .wax-seal {
            position: absolute;
            bottom: clamp(10px, 4vw, 18px);
            left: 50%;
            transform: translateX(-50%);
            width: clamp(28px, 8vw, 38px);
            height: clamp(28px, 8vw, 38px);
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #e07a7a, #c44e5a 45%, #a33a46);
            box-shadow:
                0 3px 8px rgba(0,0,0,0.25),
                inset 0 1px 2px rgba(255,255,255,0.25);
            z-index: 2;
            opacity: 0.9;
        }
        .wax-seal::after {
            content: '‚ú¶';
            position: absolute;
            inset: 0;
            display: flex; align-items: center; justify-content: center;
            color: rgba(255,255,255,0.7);
            font-size: clamp(14px, 4vw, 18px);
        }

        /* hint text below envelope */
        .env-hint {
            margin-top: clamp(20px, 5vh, 32px);
            font-size: clamp(0.9rem, 3vw, 1.05rem);
            color: var(--warm-brown);
            opacity: 0;
            animation: envTitleIn 0.8s 1s ease forwards;
            text-align: center;
        }

        /* ========== FLOATING DECO ========== */
        .deco {
            position: fixed;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
            pointer-events: none;
            font-size: clamp(30px, 8vw, 60px);
        }

        .deco:nth-child(1) {
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .deco:nth-child(2) {
            top: 70%;
            right: 10%;
            animation-delay: 5s;
        }

        .deco:nth-child(3) {
            bottom: 15%;
            left: 15%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(5deg); }
        }

        .container {
            max-width: 900px;
            width: 100%;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: clamp(20px, 5vh, 40px);
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-family: 'Caveat', cursive;
            font-size: clamp(2rem, 7vw, 3.5rem);
            color: var(--warm-brown);
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px rgba(212, 165, 165, 0.3);
            font-weight: 700;
        }

        .header p {
            font-size: clamp(0.9rem, 3vw, 1.2rem);
            color: var(--ink);
            opacity: 0.7;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .flipbook-container {
            perspective: 2000px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            animation: fadeIn 1.5s ease-out 0.5s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .book {
            width: min(95vw, 600px);
            height: clamp(300px, 60vw, 400px);
            max-height: 400px;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.15),
                0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .left-page {
            position: absolute;
            width: 50%;
            height: 100%;
            left: 0;
            background: var(--paper);
            border: 2px solid var(--warm-brown);
            border-right: 1px solid var(--warm-brown);
            padding: clamp(20px, 5vw, 40px) clamp(15px, 4vw, 30px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .right-page {
            position: absolute;
            width: 50%;
            height: 100%;
            right: 0;
            background: var(--paper);
            border: 2px solid var(--warm-brown);
            border-left: 1px solid var(--warm-brown);
            padding: clamp(20px, 5vw, 40px) clamp(15px, 4vw, 30px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .page-content h2 {
            font-family: 'Caveat', cursive;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            color: var(--warm-brown);
            margin-bottom: clamp(10px, 3vh, 20px);
            font-weight: 700;
        }

        .page-content p {
            font-size: clamp(0.85rem, 2.5vw, 1.1rem);
            line-height: 1.6;
            color: var(--ink);
            max-width: 95%;
        }

        .illustration {
            width: clamp(60px, 15vw, 120px);
            height: clamp(60px, 15vw, 120px);
            margin: clamp(10px, 3vh, 20px) 0;
            font-size: clamp(40px, 12vw, 80px);
            opacity: 0.8;
        }

        .doodle {
            position: absolute;
            opacity: 0.15;
            font-size: clamp(25px, 6vw, 40px);
        }

        .doodle.top-left { top: 10px; left: 10px; }
        .doodle.top-right { top: 10px; right: 10px; }
        .doodle.bottom-left { bottom: 10px; left: 10px; }
        .doodle.bottom-right { bottom: 10px; right: 10px; }

        .tape {
            position: absolute;
            width: clamp(40px, 10vw, 60px);
            height: clamp(15px, 4vw, 20px);
            background: rgba(255, 250, 220, 0.6);
            border: 1px solid rgba(139, 115, 85, 0.2);
            transform: rotate(-5deg);
        }

        .tape.top { top: -10px; left: 50%; margin-left: clamp(-20px, -5vw, -30px); }
        .tape.bottom { bottom: -10px; right: 50%; margin-right: clamp(-20px, -5vw, -30px); transform: rotate(5deg); }

        .controls {
            text-align: center;
            margin-top: clamp(20px, 5vh, 40px);
            display: flex;
            gap: clamp(10px, 3vw, 20px);
            justify-content: center;
            animation: fadeIn 2s ease-out 1s both;
            flex-wrap: wrap;
        }

        button {
            padding: clamp(10px, 3vw, 15px) clamp(20px, 5vw, 35px);
            font-family: 'Patrick Hand', cursive;
            font-size: clamp(1rem, 3vw, 1.2rem);
            background: var(--soft-orange);
            color: white;
            border: 3px solid var(--warm-brown);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 0 var(--warm-brown),
                0 8px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            top: 0;
        }

        button:hover {
            background: var(--muted-pink);
            transform: translateY(-2px);
            box-shadow: 
                0 6px 0 var(--warm-brown),
                0 12px 25px rgba(0, 0, 0, 0.15);
        }

        button:active {
            top: 4px;
            box-shadow: 
                0 0 0 var(--warm-brown),
                0 4px 10px rgba(0, 0, 0, 0.1);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-indicator {
            margin-top: clamp(15px, 3vh, 20px);
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            color: var(--warm-brown);
            opacity: 0.8;
        }

        .fade-out {
            animation: fadeOutContent 0.3s ease-out forwards;
        }

        .fade-in {
            animation: fadeInContent 0.3s ease-in forwards;
        }

        @keyframes fadeOutContent {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes fadeInContent {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ========== CANDLES PAGE ========== */
        .candles-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #fef9f3 0%, #f5e6d3 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease, background 1.2s ease;
            padding: 20px;
            overflow-y: auto;
        }

        .candles-page.active {
            opacity: 1;
            pointer-events: all;
        }

        .candles-page.dark {
            background: linear-gradient(135deg, #1a1410 0%, #0d0a08 100%);
        }

        .candles-container {
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
            animation: fadeIn 1s ease-out;
        }

        .candles-page h1 {
            font-family: 'Caveat', cursive;
            font-size: clamp(2rem, 7vw, 3.5rem);
            color: var(--warm-brown);
            margin-bottom: 20px;
            text-shadow: 2px 2px 0px rgba(212, 165, 165, 0.3);
            font-weight: 700;
            transition: color 1s ease;
        }

        .candles-page.dark h1 {
            color: #f5ede4;
            text-shadow: 2px 2px 10px rgba(255, 200, 100, 0.3);
        }

        .candles-subtitle {
            font-size: clamp(1rem, 3vw, 1.3rem);
            color: var(--ink);
            opacity: 0.7;
            margin-bottom: clamp(20px, 5vh, 30px);
            transition: color 1s ease;
        }

        .candles-page.dark .candles-subtitle {
            color: #f5ede4;
            opacity: 0.8;
        }

        .cake-and-image-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: clamp(30px, 8vw, 60px);
            min-height: 230px;
            flex-wrap: wrap;
        }

        .cake-scene {
            position: relative;
            display: inline-block;
            flex-shrink: 0;
        }

        .cake-layers {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
            position: relative;
        }

        .cake-layer {
            width: clamp(140px, 40vw, 200px);
            height: clamp(35px, 10vw, 50px);
            background: linear-gradient(135deg, #a8e6cf 0%, #87cebc 50%, #6ec4a7 100%);
            border-radius: 10px;
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.3),
                inset 0 -5px 10px rgba(0, 0, 0, 0.1),
                inset 0 5px 10px rgba(255, 255, 255, 0.5);
            position: relative;
            margin: -5px 0;
        }

        .cake-layer::before {
            content: '';
            position: absolute;
            bottom: 10px;
            left: 10%;
            right: 10%;
            height: 15px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.4) 20%,
                rgba(255, 255, 255, 0.4) 80%,
                transparent 100%);
            border-radius: 50%;
        }

        .frosting {
            position: absolute;
            bottom: -2px;
            left: -5px;
            right: -5px;
            height: 10px;
            background: linear-gradient(90deg, #f0f8ff, #e6f3ff, #f0f8ff);
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .cake-layer:first-child {
            width: clamp(115px, 33vw, 160px);
            height: clamp(32px, 9vw, 45px);
            background: linear-gradient(
                135deg,
                rgb(250, 245, 235) 0%,
                rgb(245, 240, 230) 50%, 
                rgb(235, 225, 210) 100% 
            );
        }

        .cake-layer:nth-child(2) {
            background: linear-gradient(
                135deg,
                rgb(235, 220, 200) 0%,  
                rgb(225, 210, 190) 50%,
                rgb(210, 195, 175) 100% 
            );
        }

        .cake-layer:last-child {
            width: clamp(165px, 48vw, 240px);
            height: clamp(38px, 11vw, 55px);
            background: linear-gradient(
                135deg,
                rgb(245, 215, 220) 0%,  
                rgb(230, 200, 205) 50%, 
                rgb(215, 180, 190) 100% 
            );
        }

        .cake-plate {
            width: clamp(190px, 55vw, 280px);
            height: clamp(12px, 3vw, 15px);
            background: linear-gradient(135deg, #d4a5a5, #c49595);
            border-radius: 50%;
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.4),
                inset 0 -3px 5px rgba(0, 0, 0, 0.3);
            margin-top: 5px;
        }

        .candles-group {
            position: absolute;
            top: clamp(-40px, -10vw, -50px);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: clamp(20px, 6vw, 35px);
            align-items: flex-end;
            z-index: 10;
        }

        .candle-stick {
            position: relative;
            width: clamp(10px, 3vw, 14px);
            height: clamp(35px, 10vw, 50px);
            background: linear-gradient(to right,
                #4ecdc4 0%,
                #5fd9cf 10%,
                #45b7d1 50%,
                #4ecdc4 90%,
                #3ab5ad 100%);
            border-radius: 7px;
            box-shadow: 
                inset 3px 0 6px rgba(255, 255, 255, 0.5),
                inset -3px 0 6px rgba(0, 0, 0, 0.3),
                0 6px 12px rgba(0, 0, 0, 0.3);
            animation: candleWobble 3s ease-in-out infinite;
        }

        .candle-stick::after {
            content: '';
            position: absolute;
            top: 20%;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.6);
            box-shadow: 0 15px 0 rgba(255, 255, 255, 0.6);
        }

        .candle-stick:nth-child(1) { 
            animation-delay: 0s; 
            height: clamp(38px, 11vw, 55px);
            background: linear-gradient(to right,
                #ff6b6b 0%,
                #ff8787 10%,
                #ee5a6f 50%,
                #ff6b6b 90%,
                #e85d75 100%);
        }
        .candle-stick:nth-child(2) { 
            animation-delay: 0.5s; 
            height: clamp(35px, 10vw, 50px);
            background: linear-gradient(to right,
                #f9ca24 0%,
                #fad859 10%,
                #f0b90b 50%,
                #f9ca24 90%,
                #e0b10a 100%);
        }
        .candle-stick:nth-child(3) { 
            animation-delay: 1s; 
            height: clamp(36px, 10.5vw, 52px);
            background: linear-gradient(to right,
                #6c5ce7 0%,
                #8776f0 10%,
                #5f4dd6 50%,
                #6c5ce7 90%,
                #5746c9 100%);
        }

        @keyframes candleWobble {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-1.5deg); }
            75% { transform: rotate(1.5deg); }
        }

        .candle-stick::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: clamp(12px, 3.5vw, 16px);
            height: clamp(6px, 2vw, 8px);
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(200, 200, 200, 0.6));
            border-radius: 50% 50% 0 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .flame-container {
            position: absolute;
            top: clamp(-35px, -9vw, -45px);
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 50px;
        }

        .flame {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: clamp(18px, 5vw, 24px);
            height: clamp(30px, 8vw, 40px);
            background: radial-gradient(ellipse at center bottom,
                #ffffff 0%,
                #ffff99 10%,
                #ffdd44 25%,
                #ff9944 55%,
                #ff6644 75%,
                transparent 100%);
            border-radius: 50% 50% 50% 50% / 70% 70% 30% 30%;
            filter: blur(0.8px);
            animation: flameFlicker 0.12s ease-in-out infinite alternate;
            opacity: 1;
            transition: all 0.8s ease;
        }

        .candle-stick.blown .flame {
            opacity: 0;
            animation: flameBlowOut 0.6s ease-out forwards;
        }

        @keyframes flameFlicker {
            0% { 
                transform: translateX(-50%) scaleY(1) scaleX(1);
                filter: brightness(1) blur(0.8px);
            }
            100% { 
                transform: translateX(-50%) scaleY(0.88) scaleX(1.12) translateY(-3px);
                filter: brightness(1.4) blur(1.2px);
            }
        }

        @keyframes flameBlowOut {
            0% {
                transform: translateX(-50%) scaleY(1) scaleX(1);
                opacity: 1;
            }
            40% {
                transform: translateX(-60px) scaleY(0.4) scaleX(2) rotate(-45deg);
                opacity: 0.6;
            }
            100% {
                transform: translateX(-80px) scaleY(0.1) scaleX(3) rotate(-60deg);
                opacity: 0;
            }
        }

        .flame::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 14px;
            height: 22px;
            background: radial-gradient(ellipse at center,
                #ffffee 0%,
                #ffffcc 35%,
                transparent 80%);
            border-radius: 50%;
            filter: blur(2px);
        }

        .flame::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 16px;
            background: radial-gradient(ellipse at center,
                #ffffff 0%,
                transparent 70%);
            border-radius: 50%;
        }

        .flame-glow {
            position: absolute;
            top: clamp(-40px, -10vw, -50px);
            left: 50%;
            transform: translateX(-50%);
            width: clamp(60px, 15vw, 80px);
            height: clamp(60px, 15vw, 80px);
            background: radial-gradient(circle,
                rgba(255, 220, 100, 0.6) 0%,
                rgba(255, 180, 80, 0.4) 25%,
                rgba(255, 140, 60, 0.2) 50%,
                transparent 75%);
            border-radius: 50%;
            animation: glowPulse 1.2s ease-in-out infinite;
            opacity: 1;
            transition: opacity 0.8s ease;
            filter: blur(15px);
        }

        .candle-stick.blown .flame-glow {
            opacity: 0;
        }

        @keyframes glowPulse {
            0%, 100% {
                transform: translateX(-50%) scale(1);
                opacity: 0.7;
            }
            50% {
                transform: translateX(-50%) scale(1.2);
                opacity: 0.9;
            }
        }

        .blow-btn {
            padding: clamp(10px, 3vw, 12px) clamp(24px, 6vw, 32px);
            font-family: 'Patrick Hand', cursive;
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            background: linear-gradient(135deg, var(--soft-orange), var(--muted-pink));
            color: white;
            border: 3px solid var(--warm-brown);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow:
                0 4px 0 var(--warm-brown),
                0 8px 20px rgba(0, 0, 0, 0.15);
            position: relative;
            top: 0;
            margin-top: clamp(20px, 5vh, 28px);
            font-weight: 600;
            letter-spacing: 1px;
        }

        .blow-btn:hover {
            background: linear-gradient(135deg, var(--muted-pink), var(--sage));
            transform: translateY(-2px) scale(1.04);
            box-shadow:
                0 6px 0 var(--warm-brown),
                0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .blow-btn:active {
            top: 4px;
            box-shadow:
                0 0 0 var(--warm-brown),
                0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .blow-btn.hidden {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.8);
        }

        /* Surprise image */
        .surprise-image {
            width: clamp(150px, 40vw, 220px);
            height: clamp(150px, 40vw, 220px);
            border-radius: 16px;
            border: 4px solid rgba(255,255,255,0.6);
            box-shadow:
                0 8px 30px rgba(0,0,0,0.3),
                0 0 0 3px var(--muted-pink);
            opacity: 0;
            transform: scale(0.4) rotate(-6deg);
            transition: opacity 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275),
                        transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
            flex-shrink: 0;
            object-fit: cover;
        }

        .surprise-image.show {
            opacity: 1;
            transform: scale(1) rotate(0deg);
            pointer-events: auto;
        }

        .candles-page.dark .surprise-image {
            box-shadow:
                0 8px 30px rgba(0,0,0,0.5),
                0 0 20px rgba(255, 215, 0, 0.3),
                0 0 0 3px rgba(255, 215, 0, 0.5);
        }

        .wish-message {
            font-family: 'Caveat', cursive;
            font-size: clamp(1.8rem, 6vw, 2.8rem);
            color: var(--warm-brown);
            margin-top: 5px;
            opacity: 0;
            transform: translateY(20px) scale(0.9);
            transition: all 1s ease;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
            padding: 0 10px;
        }

        .candles-page.dark .wish-message {
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .wish-message.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confettiFall 3s ease-out forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .sparkles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1001;
        }

        .sparkle {
            position: absolute;
            font-size: clamp(18px, 5vw, 25px);
            opacity: 0;
            animation: sparkleFloat 2.5s ease-out forwards;
        }

        @keyframes sparkleFloat {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0) rotate(0deg);
            }
            30% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-250px) scale(1.5) rotate(360deg);
            }
        }

        .back-to-book {
            position: fixed;
            top: clamp(15px, 3vh, 25px);
            left: clamp(15px, 3vw, 25px);
            padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 22px);
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }

        /* ========== EXTRA SMALL SCREENS ========== */
        @media (max-width: 400px) {
            .page-content p {
                font-size: 0.8rem;
                line-height: 1.5;
            }
            
            .cake-and-image-row {
                gap: 20px;
            }
            
            .wish-message {
                font-size: 1.5rem;
            }
        }

        /* ========== LANDSCAPE MODE ON MOBILE ========== */
        @media (max-height: 500px) and (orientation: landscape) {
            .candles-page {
                justify-content: flex-start;
                padding-top: 10px;
            }
            
            .candles-subtitle {
                margin-bottom: 15px;
            }
            
            .cake-and-image-row {
                min-height: auto;
                gap: 20px;
            }
            
            .wish-message {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" autoplay loop muted>
        <source src="Alan Walker - Faded  EASY Piano Tutorial.mp3" type="audio/mpeg">
    </audio>

    <!-- floating deco (behind everything) -->
    <div class="deco">üå∏</div>
    <div class="deco">‚ú®</div>
    <div class="deco">üéÇ</div>

    <!-- ===== ENVELOPE SCREEN ===== -->
    <div id="envelopeScreen">
        <div class="env-title">A little something for you ‚ô°</div>

        <div class="envelope-wrap" id="envelopeWrap">
            <!-- envelope body -->
            <div class="envelope">
                <div class="env-bottom-fold"></div>
            </div>

            <!-- top flap -->
            <div class="env-flap">
                <div class="env-flap-face"></div>
            </div>

            <!-- heart button in center -->
            <button class="heart-btn" id="heartBtn" type="button" aria-label="Open envelope">
                <div class="heart-sparkles">
                    <span class="sp">‚ú®</span>
                    <span class="sp">‚ú®</span>
                    <span class="sp">‚ú®</span>
                    <span class="sp">‚ú®</span>
                </div>
                <svg viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                          fill="url(#hg)" stroke="rgba(180,60,80,0.3)" stroke-width="0.5"/>
                    <defs>
                        <linearGradient id="hg" x1="2" y1="3" x2="22" y2="21.35" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#f06292"/>
                            <stop offset="50%" stop-color="#ec407a"/>
                            <stop offset="100%" stop-color="#d81b60"/>
                        </linearGradient>
                    </defs>
                </svg>
            </button>

            <!-- wax seal at bottom -->
            <div class="wax-seal"></div>
        </div>

        <div class="env-hint">tap the heart ‚ô°</div>
    </div>

    <!-- ===== BOOK SCREEN ===== -->
    <div id="bookScreen" style="display:none;">
        <div class="container">
            <div class="header">
                <h1>Happy Birthday, Basma! üéâ</h1>
                <p>flip through this little book made just for you</p>
            </div>

            <div class="flipbook-container">
                <div class="book" id="book">
                    <div class="left-page" id="leftPage">
                        <div class="page-content" id="leftContent"></div>
                    </div>
                    <div class="right-page" id="rightPage">
                        <div class="page-content" id="rightContent"></div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="prevBtn" onclick="previousPage()" disabled>‚Üê Previous</button>
                <button id="nextBtn" onclick="nextPage()">Next ‚Üí</button>
            </div>
            <div class="page-indicator" id="pageIndicator">Page 1-2 of 6</div>
        </div>
    </div>

    <!-- ===== CANDLES PAGE ===== -->
    <div class="candles-page" id="candlesPage">
        <button class="back-to-book" onclick="hideCandlesPage()">‚Üê</button>

        <div class="candles-container">
            <h1>Make a Wish! ‚ú®</h1>
            <p class="candles-subtitle">Close your eyes and blow out the candles</p>

            <div class="cake-and-image-row">
                <div class="cake-scene">
                    <div class="candles-group" id="candlesGroup">
                        <div class="candle-stick">
                            <div class="flame-glow"></div>
                            <div class="flame-container"><div class="flame"></div></div>
                        </div>
                        <div class="candle-stick">
                            <div class="flame-glow"></div>
                            <div class="flame-container"><div class="flame"></div></div>
                        </div>
                        <div class="candle-stick">
                            <div class="flame-glow"></div>
                            <div class="flame-container"><div class="flame"></div></div>
                        </div>
                    </div>

                    <div class="cake-layers">
                        <div class="cake-layer"><div class="frosting"></div></div>
                        <div class="cake-layer"><div class="frosting"></div></div>
                        <div class="cake-layer"><div class="frosting"></div></div>
                    </div>
                    <div class="cake-plate"></div>
                </div>

                <img src="Montage Photo Vision board template Scrapbooking Classique Beige.png"
                     id="surpriseImage" class="surprise-image" alt="Surprise" />
            </div>

            <button class="blow-btn" id="blowBtn" onclick="blowCandles()">Blow the Candles üå¨Ô∏è</button>

            <div class="wish-message" id="wishMessage">
                Your wish has been made! üåü<br>
                <span style="font-size:0.6em;opacity:0.8;">May all your dreams come true ‚ú®</span>
            </div>
        </div>

        <div class="sparkles" id="sparkles"></div>
    </div>

    <script>
    // ===== ENVELOPE ‚Üí BOOK TRANSITION =====
    let envelopeOpened = false;

    function openEnvelope() {
        if (envelopeOpened) return;
        envelopeOpened = true;

        unlockSound();

        const wrap = document.getElementById('envelopeWrap');
        const screen = document.getElementById('envelopeScreen');
        const bookScreen = document.getElementById('bookScreen');

        // 1. open flap
        wrap.classList.add('open');

        // 2. after flap animation, fade away envelope screen & show book
        setTimeout(() => {
            screen.classList.add('fade-away');
            bookScreen.style.display = 'block';
            updatePages();
            updateButtons();
        }, 750);
    }

    // Support tap (touchpad/touchscreen) and click
    (function () {
        const wrap = document.getElementById('envelopeWrap');
        if (!wrap) return;
        wrap.addEventListener('click', openEnvelope);
        wrap.addEventListener('touchend', function (e) {
            e.preventDefault();
            openEnvelope();
        }, { passive: false });
    })();

    // ===== BOOK PAGES =====
    const bookPages = [
        {
            left: `
                <div class="tape top"></div>
                <div class="doodle top-left">‚úø</div>
                <div class="doodle bottom-right">‚òÜ</div>
                <div class="illustration">üéÅ</div>
                <h2>For You</h2>
                <p>A special birthday message<br>wrapped in warmth & nostalgia</p>
            `,
            right: `
                <div class="doodle top-right">‚ô°</div>
                <div class="doodle bottom-left">‚óá</div>
                <h2>Another Year</h2>
                <p>Another trip around the sun, another collection of moments, another chapter of memories waiting to be written.</p>
            `
        },
        {
            left: `
                <div class="doodle top-left">‚òÄ</div>
                <div class="doodle bottom-right">‚òÅ</div>
                <div class="illustration">üåü</div>
                <h2>You Shine</h2>
                <p>In a world that can feel heavy, your light brings warmth. Your kindness creates ripples that touch more lives than you know.</p>
            `,
            right: `
                <div class="doodle top-right">‚úé</div>
                <div class="doodle bottom-left">‚ô™</div>
                <h2>Grateful</h2>
                <p>For every laugh shared, every quiet moment, every time you've been exactly who you are. The world is better with you in it.</p>
            `
        },
        {
            left: `
                <div class="doodle top-left">‚ùÄ</div>
                <div class="doodle bottom-right">‚úø</div>
                <div class="illustration">üéà</div>
                <h2>This Year</h2>
                <p>May it bring you adventures that excite you, rest when you need it, and moments that make you smile when you remember them.</p>
            `,
            right: `
                <div class="tape bottom"></div>
                <div class="doodle top-right">‚ô°</div>
                <div class="doodle bottom-left">‚òÖ</div>
                <div class="illustration">üéÇ</div>
                <h2>Make a Wish</h2>
                <p>Close your eyes, take a breath, and wish for something that makes your heart feel full. You deserve all the magic.</p>
                <p style="margin-top:20px;font-size:0.9rem;opacity:0.7;">‚Äî with love, always ‚ô°</p>
                <p style="margin-top:10px;font-size:1rem;opacity:0.8;">~Z</p>
                <button onclick="showCandlesPage()" style="margin-top:5px;padding:5px 5px;font-family:'Patrick Hand',cursive;font-size:clamp(0.6rem, 2.5vw, 0.6rem);background:var(--soft-orange);color:white;border:3px solid var(--warm-brown);border-radius:50px;cursor:pointer;box-shadow:0 4px 0 var(--warm-brown),0 8px 20px rgba(0,0,0,0.1);">
                    Make Your Wish üéÇ‚ú®
                </button>
            `
        }
    ];

    let currentSpread = 0;
    const totalSpreads = bookPages.length;

    // ===== MUSIC =====
    const music = document.getElementById("bgMusic");
    let soundUnlocked = false;
    const unlockSound = () => {
        if (soundUnlocked || !music) return;
        soundUnlocked = true;
        music.muted = false;
        music.volume = 0.3;
        music.play().catch(() => {});
    };

    // ===== PAGE NAVIGATION =====
    function updatePages() {
        const leftContent  = document.getElementById('leftContent');
        const rightContent = document.getElementById('rightContent');

        leftContent.classList.add('fade-out');
        rightContent.classList.add('fade-out');

        setTimeout(() => {
            leftContent.innerHTML  = bookPages[currentSpread].left;
            rightContent.innerHTML = bookPages[currentSpread].right;
            leftContent.classList.remove('fade-out');
            rightContent.classList.remove('fade-out');
            leftContent.classList.add('fade-in');
            rightContent.classList.add('fade-in');
            setTimeout(() => {
                leftContent.classList.remove('fade-in');
                rightContent.classList.remove('fade-in');
            }, 300);
        }, 300);
    }

    function updateButtons() {
        document.getElementById('prevBtn').disabled = currentSpread === 0;
        document.getElementById('nextBtn').disabled = currentSpread === totalSpreads - 1;
        const s = currentSpread * 2 + 1;
        document.getElementById('pageIndicator').textContent = `Page ${s}-${s+1} of ${totalSpreads * 2}`;
    }

    function nextPage() {
        if (currentSpread < totalSpreads - 1) { currentSpread++; updatePages(); updateButtons(); }
    }

    function previousPage() {
        if (currentSpread > 0) { currentSpread--; updatePages(); updateButtons(); }
    }

    document.addEventListener('keydown', (e) => {
        const bookScreen = document.getElementById('bookScreen');
        if (bookScreen.style.display === 'none') return;
        if (e.key === 'ArrowRight') nextPage();
        if (e.key === 'ArrowLeft')  previousPage();
    });

    // ===== CANDLES PAGE =====
    let candlesBlown = false;

    function showCandlesPage() {
        const cp = document.getElementById('candlesPage');
        cp.classList.add('active');
        document.querySelectorAll('.candle-stick').forEach(c => c.classList.remove('blown'));
        document.getElementById('blowBtn').classList.remove('hidden');
        document.getElementById('wishMessage').classList.remove('show');
        document.getElementById('surpriseImage').classList.remove('show');
        cp.classList.remove('dark');
        candlesBlown = false;
    }

    function hideCandlesPage() {
        document.getElementById('candlesPage').classList.remove('active');
    }

    function blowCandles() {
        if (candlesBlown) return;
        candlesBlown = true;

        const candles     = document.querySelectorAll('.candle-stick');
        const blowBtn     = document.getElementById('blowBtn');
        const wishMessage = document.getElementById('wishMessage');
        const candlesPage = document.getElementById('candlesPage');
        const surpriseImg = document.getElementById('surpriseImage');

        candles.forEach((c, i) => {
            setTimeout(() => { c.classList.add('blown'); createSmoke(c); }, i * 300);
        });

        setTimeout(() => blowBtn.classList.add('hidden'), 1100);
        setTimeout(() => candlesPage.classList.add('dark'), 1400);
        setTimeout(() => surpriseImg.classList.add('show'), 1800);
        setTimeout(() => { wishMessage.classList.add('show'); createConfetti(); createSparkles(); }, 2400);
    }

    function createSmoke(candle) {
        const smoke = document.createElement('div');
        Object.assign(smoke.style, {
            position:'absolute', top:'-40px', left:'50%',
            transform:'translateX(-50%)', width:'4px', height:'25px',
            background:'linear-gradient(to top, rgba(180,180,180,0.7), transparent)',
            borderRadius:'50%', animation:'smokeRise 1.8s ease-out forwards', pointerEvents:'none'
        });
        candle.appendChild(smoke);
        setTimeout(() => smoke.remove(), 1800);
    }

    function createConfetti() {
        const colors = ['#ff6b6b','#4ecdc4','#45b7d1','#f9ca24','#6c5ce7','#fd79a8'];
        for (let i = 0; i < 100; i++) {
            setTimeout(() => {
                const el = document.createElement('div');
                Object.assign(el.style, {
                    position:'fixed',
                    width: (Math.random()*10+5)+'px',
                    height:(Math.random()*10+5)+'px',
                    background: colors[Math.floor(Math.random()*colors.length)],
                    left: (Math.random()*100)+'%', top:'-20px',
                    borderRadius: Math.random()>0.5?'50%':'0',
                    animation:`confettiFall ${Math.random()*2+3}s ease-out forwards`,
                    opacity:'0.8', zIndex:'3001'
                });
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 5000);
            }, i * 30);
        }
    }

    function createSparkles() {
        const cont = document.getElementById('sparkles');
        const syms = ['‚ú®','‚≠ê','üí´','üåü','‚ú¶','üéâ','üéä'];
        for (let i = 0; i < 40; i++) {
            setTimeout(() => {
                const sp = document.createElement('div');
                sp.className = 'sparkle';
                sp.textContent = syms[Math.floor(Math.random()*syms.length)];
                sp.style.left = (Math.random()*100)+'%';
                sp.style.top  = (Math.random()*100)+'%';
                sp.style.animationDelay = (Math.random()*0.5)+'s';
                cont.appendChild(sp);
                setTimeout(() => sp.remove(), 2500);
            }, i * 80);
        }
    }

    // smoke keyframes
    const _s = document.createElement('style');
    _s.textContent = `@keyframes smokeRise {
        0%   { opacity:0.9; transform:translateX(-50%) translateY(0) scaleX(1); }
        100% { opacity:0;   transform:translateX(-50%) translateY(-50px) scaleX(2.5); }
    }`;
    document.head.appendChild(_s);
    </script>
</body>
</html>
